[{"F:\\server\\my-app\\src\\App.js":"1","F:\\server\\my-app\\src\\screens\\HomeScreen.js":"2","F:\\server\\my-app\\src\\reportWebVitals.js":"3","F:\\server\\my-app\\src\\screens\\CartScreen.js":"4","F:\\server\\my-app\\src\\index.js":"5","F:\\server\\my-app\\src\\screens\\LoginScreen.js":"6","F:\\server\\my-app\\src\\screens\\RegisterScreen.js":"7","F:\\server\\my-app\\src\\constant\\index.js":"8","F:\\server\\my-app\\src\\screens\\OrderScreen.js":"9","F:\\server\\my-app\\src\\screens\\AccountScreen.js":"10"},{"size":1063,"mtime":1608880752819,"results":"11","hashOfConfig":"12"},{"size":10428,"mtime":1608884416714,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":1608085646143,"results":"14","hashOfConfig":"12"},{"size":7952,"mtime":1609294544997,"results":"15","hashOfConfig":"12"},{"size":524,"mtime":1609297157559,"results":"16","hashOfConfig":"12"},{"size":3186,"mtime":1608710714884,"results":"17","hashOfConfig":"12"},{"size":4979,"mtime":1608540724898,"results":"18","hashOfConfig":"12"},{"size":88,"mtime":1608523656585,"results":"19","hashOfConfig":"12"},{"size":3020,"mtime":1608884755291,"results":"20","hashOfConfig":"12"},{"size":4777,"mtime":1609227522400,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"118jfvj",{"filePath":"25","messages":"26","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":1,"source":null},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"28"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"24"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50"},"F:\\server\\my-app\\src\\App.js",[],["51","52"],"F:\\server\\my-app\\src\\screens\\HomeScreen.js",["53","54","55","56","57"],"import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport '../../src/assets/styles/home.css';\r\nimport { Link, useRouteMatch, useHistory } from \"react-router-dom\";\r\nimport Constant from '../constant';\r\n\r\nclass HomeScreen extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: null,\r\n            categoies: [],\r\n            products: [],\r\n            total: 0,\r\n            totalOrder: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAuth();\r\n        this.getCategory();\r\n        this.getProducts();\r\n        this.getTotalItemInCart();\r\n        this.getTotalOrder();\r\n    }\r\n\r\n    getAuth = async () => {\r\n        try {\r\n            let user = await localStorage.getItem('user');\r\n            this.setState({ user: JSON.parse(user) })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    getCategory = async () => {\r\n        try {\r\n            const res = await axios.get(`${Constant.BASE_URL}/category`);\r\n            this.setState({ categoies: [{ id: 4, name: \"Tất cả\", slug: '', selected: true }].concat(res.data.data) });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    getProducts = async () => {\r\n        try {\r\n            const res = await axios.get(`${Constant.BASE_URL}/products/index`);\r\n            this.setState({ products: res.data.data });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    getTotalItemInCart = async () => {\r\n        try {\r\n            const user = await localStorage.getItem('user');\r\n            const userPar = JSON.parse(user);\r\n            const res = await axios.get(`${Constant.BASE_URL}/cart/item/total`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${userPar && userPar.access_token}`\r\n                }\r\n            });\r\n            console.log('getTotalItemInCart:', res);\r\n            this.setState({\r\n                total: res.data.total\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    getTotalOrder = async () => {\r\n        try {\r\n            const user = await localStorage.getItem('user');\r\n            const userPar = JSON.parse(user);\r\n            const res = await axios.get(`${Constant.BASE_URL}/order/total-order`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${userPar && userPar.access_token}`\r\n                }\r\n            })\r\n            console.log('getTotalOrder:', res);\r\n            this.setState({\r\n                totalOrder: res.data.total\r\n            });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    handleClickItem = (e) => {\r\n        if (e.id == 4) {\r\n            this.getProducts();\r\n            return;\r\n        }\r\n        this.getProductsBySlug(e.slug);\r\n    }\r\n\r\n    getProductsBySlug = async (slug) => {\r\n        try {\r\n            const res = await axios.get(`${Constant.BASE_URL}/products/show/${slug}`);\r\n            this.setState({ products: res.data.data });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    renderMenu = () => {\r\n        const { categoies } = this.state;\r\n        return (\r\n            categoies.map((e, i) => {\r\n                return (\r\n                    <div\r\n                        style={{ backgroundColor: '#C7EDFC' }}\r\n                        key={e.id} className=\"menu-item\" onClick={() => this.handleClickItem(e)}>\r\n                        <span>{e.name}</span>\r\n                    </div>\r\n                )\r\n            }))\r\n    }\r\n\r\n    onAdd = async (item) => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        console.log('item11:', item);\r\n        try {\r\n            console.log(\"pa:\", item, this.state.user);\r\n            const res = await axios.post(`${Constant.BASE_URL}/cart/item/add`, item, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${this.state.user && this.state.user.access_token}`\r\n                }\r\n            });\r\n            console.log(\"resadd:\", res);\r\n            if (res.data.status != 200) {\r\n                alert(res.data.message);\r\n                return;\r\n            }\r\n            this.getTotalItemInCart();\r\n            setTimeout(() => { alert(res.data.message) }, 250)\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    renderProducts = () => {\r\n        const { products } = this.state;\r\n        return (\r\n            products.map((e, i) => {\r\n                return (\r\n                    <div className=\"product-item\" key={e.id}>\r\n                        <img src={e.image} className=\"image-product\" alt=\"product\" />\r\n                        <span className=\"title-product\">{e.name}</span>\r\n                        <span style={{ alignSelf: 'center', marginTop: 10, color: '#BF081F' }}>Giá: {e.price} VNĐ</span>\r\n                        <div\r\n                            style={{ marginTop: 10, alignSelf: 'center', backgroundColor: '#46A049', padding: 8 }}\r\n                            onClick={() => this.onAdd(e)}\r\n                        >\r\n                            <span style={{ color: 'white' }}>Thêm vào giỏ hàng</span>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })\r\n        )\r\n    }\r\n\r\n    logout = () => {\r\n        this.setState({\r\n            user: null\r\n        }, () => {\r\n            localStorage.clear();\r\n        })\r\n    }\r\n\r\n    onClickCart = () => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        this.props.history.push('/cart');\r\n    }\r\n\r\n    onClickOrder = () => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        this.props.history.push('/order');\r\n    }\r\n\r\n    onClickAccount = () => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        this.props.history.push('/account');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>Trang chủ</h1>\r\n                <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n                    <div\r\n                        onClick={this.onClickCart}\r\n                        style={{\r\n                            padding: 10,\r\n                            margin: 4,\r\n                            backgroundColor: 'yellow',\r\n                        }}>\r\n                        {this.state.user && <span style={{ fontSize: 16, fontWeight: 'bold', color: 'red' }}>Hiện có {this.state.total} sản phẩm</span>}\r\n                        <img src=\"https://www.flaticon.com/svg/static/icons/svg/833/833314.svg\"\r\n                            style={{ width: 24, height: 24, objectFit: 'contain', marginLeft: 4 }} />\r\n                    </div>\r\n\r\n                    <div\r\n                        onClick={this.onClickOrder}\r\n                        style={{\r\n                            padding: 10,\r\n                            margin: 4,\r\n                            backgroundColor: 'green'\r\n                        }}>\r\n                        {this.state.user && <span style={{ fontSize: 16, fontWeight: 'bold', color: 'white' }}>Hiện có {this.state.totalOrder} đơn hàng</span>}\r\n                        <img src=\"https://www.flaticon.com/svg/static/icons/svg/3144/3144422.svg\"\r\n                            style={{ width: 24, height: 24, objectFit: 'contain', marginLeft: 4 }} />\r\n                    </div>\r\n\r\n                    <div\r\n                        onClick={this.onClickAccount}\r\n                        style={{\r\n                            padding: 10,\r\n                            margin: 4,\r\n                            backgroundColor: 'blue'\r\n                        }}>\r\n                        {this.state.user && <span style={{ fontSize: 16, fontWeight: 'bold', color: 'white' }}>Tài khoản</span>}\r\n                        <img src=\"https://www.flaticon.com/svg/static/icons/svg/2521/2521782.svg\"\r\n                            style={{ width: 24, height: 24, objectFit: 'contain', marginLeft: 4 }} />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div style={{ position: 'fixed', right: 0 }}>\r\n                    {\r\n                        this.state.user ?\r\n                            <span style={{ fontWeight: 'bold' }}>Hello {this.state.user.username}</span> :\r\n                            <Link\r\n                                to={'/login'}\r\n                                style={{\r\n                                    padding: 10,\r\n                                    margin: 4,\r\n                                    backgroundColor: 'yellow'\r\n                                }}>\r\n                                <span>Đăng nhập</span>\r\n                            </Link>\r\n                    }\r\n                    {\r\n                        this.state.user ?\r\n                            <div\r\n                                onClick={this.logout}\r\n                                style={{\r\n                                    margin: 4,\r\n                                    padding: 10,\r\n                                    backgroundColor: 'pink'\r\n                                }}>\r\n                                <span>Đăng xuất</span>\r\n                            </div> :\r\n                            <Link\r\n                                to={'/register'}\r\n                                style={{\r\n                                    margin: 4,\r\n                                    padding: 10,\r\n                                    backgroundColor: 'green'\r\n                                }}>\r\n                                <span>Đăng ký</span>\r\n                            </Link>\r\n                    }\r\n                </div>\r\n                <div className=\"menu\">\r\n                    {this.renderMenu()}\r\n                </div>\r\n                <div className=\"products\">\r\n                    {this.renderProducts()}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default function BaseHomeScreen() {\r\n    let match = useRouteMatch();\r\n    const history = useHistory();\r\n    return <HomeScreen match={match.url} history={history} />\r\n}\r\n\r\n",["58","59"],"F:\\server\\my-app\\src\\reportWebVitals.js",[],["60","61"],"F:\\server\\my-app\\src\\screens\\CartScreen.js",["62","63","64","65","66","67","68"],"F:\\server\\my-app\\src\\index.js",[],"F:\\server\\my-app\\src\\screens\\LoginScreen.js",["69","70","71"],"import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { useRouteMatch, useHistory } from \"react-router-dom\";\r\nimport Constant from '../constant';\r\n\r\nclass LoginScreen extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: ''\r\n        };\r\n    }\r\n\r\n    handleChangeUsername = (e) => {\r\n        this.setState({ username: e.target.value });\r\n    }\r\n\r\n    handleChangePassword = (e) => {\r\n        this.setState({ password: e.target.value });\r\n    }\r\n\r\n    onValidate = () => {\r\n        const { username, password } = this.state;\r\n        if (username == '') {\r\n            alert('Chưa nhập username');\r\n            return false;\r\n        }\r\n\r\n        if (password == '') {\r\n            alert('chưa nhập password');\r\n            return;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    onLogin = async () => {\r\n        if (this.onValidate()) {\r\n            try {\r\n                const params = {\r\n                    username: this.state.username,\r\n                    password: this.state.password\r\n                }\r\n                const res = await axios.post(`${Constant.BASE_URL}/api/login`, params);\r\n                console.log(\"onLoigin:\", res)\r\n                if (res.data.status == 200) {\r\n                    // this.props.history.goBack()\r\n                    await localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n                    this.props.history.push('/');\r\n                    return;\r\n                }\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { username, password } = this.state;\r\n        return (\r\n            <div style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n            }}>\r\n                <h1>Đăng nhập tài khoản</h1>\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"Username\"\r\n                    id=\"username\"\r\n                    onChange={this.handleChangeUsername}\r\n                    value={username}\r\n                />\r\n\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"Password\"\r\n                    id=\"password\"\r\n                    onChange={this.handleChangePassword}\r\n                    value={password}\r\n                />\r\n\r\n                <div\r\n                    style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center',\r\n                        width: 100,\r\n                        padding: 10, marginTop: 20,\r\n                        backgroundColor: '#42ABE1'\r\n                    }}\r\n                    onClick={this.onLogin}>\r\n                    <span> Đăng nhập </span>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default function BaseLoginScreen() {\r\n    let match = useRouteMatch();\r\n    const history = useHistory();\r\n    return (\r\n        <LoginScreen match={match} history={history} />\r\n    )\r\n};",["72","73"],"F:\\server\\my-app\\src\\screens\\RegisterScreen.js",["74","75","76","77","78","79","80"],"import Axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport { useRouteMatch, useParams, useHistory } from \"react-router-dom\";\r\nimport Constant from '../constant';\r\n\r\nclass RegisterScreen extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            name: '',\r\n            phone: '',\r\n            address: '',\r\n        };\r\n    }\r\n\r\n    handleChangeUsername = (e) => {\r\n        this.setState({ username: e.target.value });\r\n    }\r\n\r\n    handleChangePassword = (e) => {\r\n        this.setState({ password: e.target.value });\r\n    }\r\n\r\n    handleChangeName = (e) => {\r\n        this.setState({ name: e.target.value });\r\n    }\r\n\r\n    handleChangePhone = (e) => {\r\n        this.setState({ phone: e.target.value });\r\n    }\r\n\r\n    handleChangeAddress = (e) => {\r\n        this.setState({ address: e.target.value });\r\n    }\r\n\r\n    validate = () => {\r\n        const { username, password, name, phone, address } = this.state;\r\n\r\n        if (username == '') {\r\n            alert('username không đc bỏ trống');\r\n            return false;\r\n        }\r\n\r\n        if (password == '') {\r\n            alert('password không đc bỏ trống');\r\n            return false;\r\n        }\r\n\r\n        if (name == '') {\r\n            alert('name không đc bỏ trống');\r\n            return false;\r\n        }\r\n\r\n        if (phone == '') {\r\n            alert('phone không đc bỏ trống');\r\n            return false;\r\n        }\r\n\r\n        if (address == '') {\r\n            alert('address không đc bỏ trống');\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    onRegister = async () => {\r\n        const { username, password, name, phone, address } = this.state;\r\n        if (this.validate()) {\r\n            try {\r\n                const params = {\r\n                    username: username,\r\n                    password: password,\r\n                    name: name,\r\n                    phone: phone,\r\n                    address: address\r\n                }\r\n                const res = await Axios.post(`${Constant.BASE_URL}/api/register`, params);\r\n                console.log(\"Dangki:\", res);\r\n                if (res.data.status != 200) {\r\n                    setTimeout(() => { alert(res.data.message) }, 250);\r\n                    return;\r\n                }\r\n                alert(res.data.message);\r\n                await localStorage.clear();\r\n                this.props.history.push('/');\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { username, password, name, phone, address } = this.state;\r\n        return (\r\n            <div style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n            }}>\r\n                <h1>Đăng ký tài khoản</h1>\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"Username\"\r\n                    id=\"username\"\r\n                    onChange={this.handleChangeUsername}\r\n                    value={username}\r\n                />\r\n\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"Password\"\r\n                    id=\"password\"\r\n                    onChange={this.handleChangePassword}\r\n                    value={password}\r\n                />\r\n\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"Name\"\r\n                    id=\"name\"\r\n                    onChange={this.handleChangeName}\r\n                    value={name}\r\n                />\r\n\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"Phone\"\r\n                    id=\"phone\"\r\n                    onChange={this.handleChangePhone}\r\n                    value={phone}\r\n                />\r\n\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"Address\"\r\n                    id=\"address\"\r\n                    onChange={this.handleChangeAddress}\r\n                    value={address}\r\n                />\r\n\r\n                <div\r\n                    style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center',\r\n                        width: 100,\r\n                        padding: 10, marginTop: 20,\r\n                        backgroundColor: '#42ABE1'\r\n                    }}\r\n                    onClick={this.onRegister}>\r\n                    <span> Đăng ký </span>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default function BaseRegisterScreen() {\r\n    let match = useRouteMatch();\r\n    const history = useHistory();\r\n    return <RegisterScreen match={match.url} history={history} />\r\n} ","F:\\server\\my-app\\src\\constant\\index.js",[],"F:\\server\\my-app\\src\\screens\\OrderScreen.js",["81","82"],"import Axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport { useRouteMatch, useHistory } from \"react-router-dom\";\r\nimport Constant from '../../src/constant';\r\n\r\nclass OrderScreen extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: []\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getOrders();\r\n    }\r\n\r\n    getOrders = async () => {\r\n        try {\r\n            const user = await localStorage.getItem('user');\r\n            const userPar = JSON.parse(user);\r\n            const res = await Axios.get(`${Constant.BASE_URL}/order/show`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${userPar && userPar.access_token}`\r\n                }\r\n            });\r\n            console.log('getOrders:', res);\r\n            if (res.data.status != 200) {\r\n                alert(res.data.message);\r\n                return;\r\n            }\r\n            this.setState({\r\n                data: res.data.data\r\n            });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    renderListOrder = () => {\r\n        const { data } = this.state;\r\n        if (data.length == 0) {\r\n            return <div>\r\n                <span style={{ color: 'grey' }}>Đơn hàng trống</span>\r\n            </div>\r\n        }\r\n        return (\r\n            data.map((e, i) => {\r\n                return (\r\n                    <div\r\n                        key={e.id}\r\n                        style={{\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            marginTop: 15,\r\n                            backgroundColor: 'yellow',\r\n                            width: 500\r\n                        }}>\r\n                        <span>Mã đơn hàng: {e.id}</span>\r\n                        <span>Ngày tạo: {e.date}</span>\r\n                        <span style={{ color: '#BF081F' }}>Tổng tiền: {e.amount} VNĐ</span>\r\n                        {\r\n                            e.items.map((ele, index) => {\r\n                                return <div\r\n                                    style={{ display: 'flex', flexDirection: 'column', backgroundColor: '#46A049', marginTop: 8 }}\r\n                                    key={ele.id}>\r\n                                    <span>Tên sản phẩm: {ele.name}</span>\r\n                                    <span>Số lượng: {ele.quantity}</span>\r\n                                </div>\r\n                            })\r\n                        }\r\n                    </div>\r\n                )\r\n            })\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>Đơn hàng</h1>\r\n                {this.renderListOrder()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default function BaseOrderScreen() {\r\n    let match = useRouteMatch();\r\n    const history = useHistory();\r\n    return (<OrderScreen match={match} history={history} />)\r\n} ","F:\\server\\my-app\\src\\screens\\AccountScreen.js",["83","84","85"],"import Axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport Constant from '../constant';\r\n\r\nclass AccountScreen extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '',\r\n            phone: '',\r\n            address: '',\r\n            avatarShow: '',\r\n            avatar: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.showUser()\r\n    }\r\n\r\n    showUser = async () => {\r\n        try {\r\n            const user = await localStorage.getItem('user');\r\n            const userPar = JSON.parse(user);\r\n            const res = await Axios.get(`${Constant.BASE_URL}/user/show`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${userPar && userPar.access_token}`\r\n                }\r\n            });\r\n            console.log(res);\r\n            if (res.data.status != 200) {\r\n                return;\r\n            }\r\n            this.setState({\r\n                name: res.data.data.name,\r\n                phone: res.data.data.phone,\r\n                address: res.data.data.address,\r\n                avatarShow: res.data.data.avatar\r\n            })\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    handleChangeName = (e) => {\r\n        this.setState({ name: e.target.value });\r\n    }\r\n\r\n    handleChangePhone = (e) => {\r\n        this.setState({ phone: e.target.value });\r\n    }\r\n\r\n    handleChangeAdress = (e) => {\r\n        this.setState({ address: e.target.value });\r\n    }\r\n\r\n\r\n    onFileChange = (e) => {\r\n        console.log(e);\r\n\r\n        this.setState({\r\n            avatar: e.target.files[0]\r\n        })\r\n    }\r\n\r\n    onSave = async () => {\r\n        if (this.state.avatar == null) {\r\n            alert('Bạn chưa chọn ảnh');\r\n            return;\r\n        }\r\n        try {\r\n            const user = await localStorage.getItem('user');\r\n            const userPar = JSON.parse(user);\r\n\r\n            let formData = new FormData();\r\n            formData.append(\"name\", this.state.name);\r\n            formData.append(\"phone\", this.state.phone);\r\n            formData.append(\"address\", this.state.address)\r\n            formData.append('avatar', this.state.avatar);\r\n\r\n            const res = await Axios.post(`${Constant.BASE_URL}/user/upload`,\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${userPar && userPar.access_token}`,\r\n                        \"Content-type\": \"multipart/form-data\",\r\n                    },\r\n                }\r\n            )\r\n\r\n            console.log(res);\r\n\r\n            if(res.data.status !=200) {\r\n                alert(res.data.message);\r\n                return;\r\n            }\r\n            this.showUser();\r\n        } catch (error) {\r\n            console.log(\"loi:\", error);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { name, phone, address, avatarShow } = this.state;\r\n        return (\r\n            <div style={{ display: 'flex', flexDirection: 'column' }}>\r\n                <h1>Tài khoản</h1>\r\n\r\n                <span>Name:</span>\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"name\"\r\n                    id=\"name\"\r\n                    onChange={this.handleChangeName}\r\n                    value={name}\r\n                />\r\n\r\n                <span>Phone:</span>\r\n                <input\r\n                    disabled\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"phone\"\r\n                    id=\"phone\"\r\n                    onChange={this.handleChangePhone}\r\n                    value={phone}\r\n                />\r\n\r\n                <span>Address:</span>\r\n                <input\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    placeholder=\"address\"\r\n                    id=\"address\"\r\n                    onChange={this.handleChangeAdress}\r\n                    value={address}\r\n                />\r\n\r\n                <span>Avtart:</span>\r\n                {\r\n                    avatarShow && <img src={`${Constant.BASE_URL}${avatarShow}`} style={{ width: 50, height: 50 }} />\r\n                }\r\n                <input\r\n                    type=\"file\"\r\n                    style={{ width: 200, marginTop: 10 }}\r\n                    onChange={this.onFileChange} />\r\n\r\n                <div\r\n                    onClick={this.onSave}\r\n                    style={{ backgroundColor: 'green', width: 70, padding: 4, marginTop: 10 }}>\r\n                    <span style={{ margin: 10, color: 'white' }}>Lưu</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default function BaseAccountScreen() {\r\n    return <AccountScreen />\r\n};",{"ruleId":"86","replacedBy":"87"},{"ruleId":"88","replacedBy":"89"},{"ruleId":"90","severity":1,"message":"91","line":92,"column":18,"nodeType":"92","messageId":"93","endLine":92,"endColumn":20},{"ruleId":"90","severity":1,"message":"94","line":136,"column":33,"nodeType":"92","messageId":"93","endLine":136,"endColumn":35},{"ruleId":"95","severity":1,"message":"96","line":213,"column":25,"nodeType":"97","endLine":214,"endColumn":102},{"ruleId":"95","severity":1,"message":"96","line":225,"column":25,"nodeType":"97","endLine":226,"endColumn":102},{"ruleId":"95","severity":1,"message":"96","line":237,"column":25,"nodeType":"97","endLine":238,"endColumn":102},{"ruleId":"86","replacedBy":"98"},{"ruleId":"88","replacedBy":"99"},{"ruleId":"86","replacedBy":"100"},{"ruleId":"88","replacedBy":"101"},{"ruleId":"90","severity":1,"message":"94","line":41,"column":33,"nodeType":"92","messageId":"93","endLine":41,"endColumn":35},{"ruleId":"90","severity":1,"message":"94","line":64,"column":33,"nodeType":"92","messageId":"93","endLine":64,"endColumn":35},{"ruleId":"90","severity":1,"message":"94","line":84,"column":33,"nodeType":"92","messageId":"93","endLine":84,"endColumn":35},{"ruleId":"90","severity":1,"message":"94","line":104,"column":33,"nodeType":"92","messageId":"93","endLine":104,"endColumn":35},{"ruleId":"90","severity":1,"message":"91","line":116,"column":25,"nodeType":"92","messageId":"93","endLine":116,"endColumn":27},{"ruleId":"102","severity":1,"message":"103","line":171,"column":27,"nodeType":"104","messageId":"105","endLine":171,"endColumn":35,"fix":"106"},{"ruleId":"90","severity":1,"message":"94","line":181,"column":33,"nodeType":"92","messageId":"93","endLine":181,"endColumn":35},{"ruleId":"90","severity":1,"message":"91","line":26,"column":22,"nodeType":"92","messageId":"93","endLine":26,"endColumn":24},{"ruleId":"90","severity":1,"message":"91","line":31,"column":22,"nodeType":"92","messageId":"93","endLine":31,"endColumn":24},{"ruleId":"90","severity":1,"message":"91","line":48,"column":37,"nodeType":"92","messageId":"93","endLine":48,"endColumn":39},{"ruleId":"86","replacedBy":"107"},{"ruleId":"88","replacedBy":"108"},{"ruleId":"109","severity":1,"message":"110","line":3,"column":25,"nodeType":"111","messageId":"112","endLine":3,"endColumn":34},{"ruleId":"90","severity":1,"message":"91","line":41,"column":22,"nodeType":"92","messageId":"93","endLine":41,"endColumn":24},{"ruleId":"90","severity":1,"message":"91","line":46,"column":22,"nodeType":"92","messageId":"93","endLine":46,"endColumn":24},{"ruleId":"90","severity":1,"message":"91","line":51,"column":18,"nodeType":"92","messageId":"93","endLine":51,"endColumn":20},{"ruleId":"90","severity":1,"message":"91","line":56,"column":19,"nodeType":"92","messageId":"93","endLine":56,"endColumn":21},{"ruleId":"90","severity":1,"message":"91","line":61,"column":21,"nodeType":"92","messageId":"93","endLine":61,"endColumn":23},{"ruleId":"90","severity":1,"message":"94","line":82,"column":37,"nodeType":"92","messageId":"93","endLine":82,"endColumn":39},{"ruleId":"90","severity":1,"message":"94","line":29,"column":33,"nodeType":"92","messageId":"93","endLine":29,"endColumn":35},{"ruleId":"90","severity":1,"message":"91","line":43,"column":25,"nodeType":"92","messageId":"93","endLine":43,"endColumn":27},{"ruleId":"90","severity":1,"message":"94","line":32,"column":33,"nodeType":"92","messageId":"93","endLine":32,"endColumn":35},{"ruleId":"90","severity":1,"message":"94","line":95,"column":32,"nodeType":"92","messageId":"93","endLine":95,"endColumn":34},{"ruleId":"95","severity":1,"message":"96","line":141,"column":35,"nodeType":"97","endLine":141,"endColumn":118},"no-native-reassign",["113"],"no-negated-in-lhs",["114"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["113"],["114"],["113"],["114"],"new-parens","Missing '()' invoking a constructor.","NewExpression","missing",{"range":"115","text":"116"},["113"],["114"],"no-unused-vars","'useParams' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",[6203,6203],"()"]