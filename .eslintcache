[{"F:\\server\\my-app\\src\\App.js":"1","F:\\server\\my-app\\src\\screens\\HomeScreen.js":"2","F:\\server\\my-app\\src\\screens\\OrderScreen.js":"3","F:\\server\\my-app\\src\\screens\\RegisterScreen.js":"4","F:\\server\\my-app\\src\\constant\\index.js":"5","F:\\server\\my-app\\src\\components\\ItemProduct\\index.js":"6","F:\\server\\my-app\\src\\components\\ItemMenu\\index.js":"7","F:\\server\\my-app\\src\\index.js":"8"},{"size":2667,"mtime":1612498979832,"results":"9","hashOfConfig":"10"},{"size":11029,"mtime":1612426341688,"results":"11","hashOfConfig":"10"},{"size":3394,"mtime":1609384776476,"results":"12","hashOfConfig":"10"},{"size":4968,"mtime":1609745901325,"results":"13","hashOfConfig":"10"},{"size":88,"mtime":1608523656585,"results":"14","hashOfConfig":"10"},{"size":1248,"mtime":1612499358952,"results":"15","hashOfConfig":"10"},{"size":427,"mtime":1612498911743,"results":"16","hashOfConfig":"10"},{"size":571,"mtime":1612498435876,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"118jfvj",{"filePath":"21","messages":"22","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"24"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"F:\\server\\my-app\\src\\App.js",[],["37","38"],"F:\\server\\my-app\\src\\screens\\HomeScreen.js",["39","40"],"import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport '../../src/assets/styles/home.css';\r\nimport { Link, useRouteMatch, useHistory } from \"react-router-dom\";\r\nimport Constant from '../constant';\r\nimport ItemProduct from '../components/ItemProduct';\r\nimport ItemMenu from '../components/ItemMenu';\r\n\r\nclass HomeScreen extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: null,\r\n            categoies: [],\r\n            products: [],\r\n            total: 0,\r\n            totalOrder: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getAuth();\r\n        this.getCategory();\r\n        this.getProducts();\r\n        this.getTotalItemInCart();\r\n        this.getTotalOrder();\r\n    }\r\n\r\n    getAuth = async () => {\r\n        try {\r\n            let user = await localStorage.getItem('user');\r\n            this.setState({ user: JSON.parse(user) })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    getCategory = async () => {\r\n        try {\r\n            const res = await axios.get(`${Constant.BASE_URL}/category`);\r\n            this.setState({ categoies: [{ id: 4, name: \"Tất cả\", slug: '', selected: true }].concat(res.data.data) });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    getProducts = async () => {\r\n        try {\r\n            const res = await axios.get(`${Constant.BASE_URL}/products/index`);\r\n            this.setState({ products: res.data.data });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    getTotalItemInCart = async () => {\r\n        try {\r\n            const user = await localStorage.getItem('user');\r\n            const userPar = JSON.parse(user);\r\n            const res = await axios.get(`${Constant.BASE_URL}/cart/item/total`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${userPar && userPar.access_token}`\r\n                }\r\n            });\r\n            console.log('getTotalItemInCart:', res);\r\n            this.setState({\r\n                total: res.data.total\r\n            })\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    getTotalOrder = async () => {\r\n        try {\r\n            const user = await localStorage.getItem('user');\r\n            const userPar = JSON.parse(user);\r\n            const res = await axios.get(`${Constant.BASE_URL}/order/total-order`, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${userPar && userPar.access_token}`\r\n                }\r\n            })\r\n            console.log('getTotalOrder:', res);\r\n            this.setState({\r\n                totalOrder: res.data.total\r\n            });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    handleClickItem = (e) => {\r\n        if (e.id == 4) {\r\n            this.getProducts();\r\n            return;\r\n        }\r\n        this.getProductsBySlug(e.slug);\r\n    }\r\n\r\n    getProductsBySlug = async (slug) => {\r\n        try {\r\n            const res = await axios.get(`${Constant.BASE_URL}/products/show/${slug}`);\r\n            console.log('res1111:', res)\r\n            this.setState({ products: res.data.data });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    renderMenu = () => {\r\n        const { categoies } = this.state;\r\n        return (\r\n            categoies.map((e, i) => {\r\n                return (\r\n                    <ItemMenu key={e.id} item={e} handleClickItem={this.handleClickItem} />\r\n                )\r\n            }))\r\n    }\r\n\r\n    onAdd = async (item) => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        console.log('item11:', item);\r\n        try {\r\n            console.log(\"pa:\", item, this.state.user);\r\n            const res = await axios.post(`${Constant.BASE_URL}/cart/item/add`, item, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${this.state.user && this.state.user.access_token}`\r\n                }\r\n            });\r\n            console.log(\"resadd:\", res);\r\n            if (res.data.status != 200) {\r\n                alert(res.data.message);\r\n                return;\r\n            }\r\n            this.getTotalItemInCart();\r\n            setTimeout(() => { alert(res.data.message) }, 250)\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    renderProducts = () => {\r\n        const { products } = this.state;\r\n        return (\r\n            products.map((e, i) => {\r\n                return (\r\n                    <ItemProduct item={e} onAdd={this.onAdd} key={e.id} />\r\n                )\r\n            })\r\n        )\r\n    }\r\n\r\n    logout = () => {\r\n        this.setState({\r\n            user: null\r\n        }, () => {\r\n            localStorage.clear();\r\n        })\r\n    }\r\n\r\n    onClickCart = () => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        this.props.history.push('/cart');\r\n    }\r\n\r\n    onClickOrder = () => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        this.props.history.push('/order');\r\n    }\r\n\r\n    onClickAccount = () => {\r\n        if (this.state.user == null) {\r\n            alert('Vui lòng đăng nhập');\r\n            return;\r\n        }\r\n        this.props.history.push('/account');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>Trang chủ</h1>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <div style={{ display: 'flex', flexDirection: 'row' }}>\r\n                        <div\r\n                            onClick={this.onClickCart}\r\n                            style={{\r\n                                display: 'flex',\r\n                                flexDirection: 'row',\r\n                                padding: 10,\r\n                                margin: 4,\r\n                                backgroundColor: 'yellow',\r\n                            }}>\r\n                            {this.state.user && <p style={{ alignSelf: 'center', fontSize: 16, fontWeight: 'bold', color: 'red' }}>Hiện có {this.state.total} sản phẩm</p>}\r\n                            <img\r\n                                alt={\"icon_product\"}\r\n                                src=\"https://www.flaticon.com/svg/static/icons/svg/833/833314.svg\"\r\n                                style={{ alignSelf: 'center', width: 24, height: 24, objectFit: 'contain', marginLeft: 4 }} />\r\n                        </div>\r\n                        <div\r\n                            onClick={this.onClickOrder}\r\n                            style={{\r\n                                display: 'flex',\r\n                                flexDirection: 'row',\r\n                                padding: 10,\r\n                                margin: 4,\r\n                                backgroundColor: 'green'\r\n                            }}>\r\n                            {this.state.user && <p style={{ alignSelf: 'center', fontSize: 16, fontWeight: 'bold', color: 'white' }}>Hiện có {this.state.totalOrder} đơn hàng</p>}\r\n                            <img\r\n                                alt={\"icon_order\"}\r\n                                src=\"https://www.flaticon.com/svg/static/icons/svg/3144/3144422.svg\"\r\n                                style={{ alignSelf: 'center', width: 24, height: 24, objectFit: 'contain', marginLeft: 4 }} />\r\n                        </div>\r\n                        <div\r\n                            onClick={this.onClickAccount}\r\n                            style={{\r\n                                display: 'flex',\r\n                                flexDirection: 'row',\r\n                                padding: 10,\r\n                                margin: 4,\r\n                                backgroundColor: 'blue'\r\n                            }}>\r\n                            {this.state.user && <p style={{ alignSelf: 'center', fontSize: 16, fontWeight: 'bold', color: 'white' }}>Tài khoản</p>}\r\n                            <img\r\n                                alt={\"icon_account\"}\r\n                                src=\"https://www.flaticon.com/svg/static/icons/svg/2521/2521782.svg\"\r\n                                style={{ alignSelf: 'center', width: 24, height: 24, objectFit: 'contain', marginLeft: 4 }} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex' }}>\r\n                        {\r\n                            this.state.user ?\r\n                                <div>\r\n                                    <div style={{ fontWeight: 'bold' }}>Hello {this.state.user.username}</div>\r\n                                    <div\r\n                                        onClick={this.logout}\r\n                                        style={{\r\n                                            margin: 4,\r\n                                            padding: 10,\r\n                                            backgroundColor: 'pink'\r\n                                        }}>\r\n                                        <div style={{ fontWeight: 'bold' }}>Đăng xuất</div>\r\n                                    </div>\r\n                                </div>\r\n                                :\r\n                                <>\r\n                                    <Link\r\n                                        to={'/login'}\r\n                                        style={{\r\n                                            padding: 10,\r\n                                            margin: 4,\r\n                                            backgroundColor: 'yellow'\r\n                                        }}>\r\n                                        <div>Đăng nhập</div>\r\n                                    </Link>\r\n                                    <Link\r\n                                        to={'/register'}\r\n                                        style={{\r\n                                            margin: 4,\r\n                                            padding: 10,\r\n                                            backgroundColor: 'green'\r\n                                        }}>\r\n                                        <div>Đăng ký</div>\r\n                                    </Link>\r\n                                </>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <ul className=\"menu\">\r\n                    {this.renderMenu()}\r\n                </ul>\r\n                <ul className=\"products\">\r\n                    {this.renderProducts()}\r\n                </ul>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default function BaseHomeScreen() {\r\n    let match = useRouteMatch();\r\n    const history = useHistory();\r\n    return <HomeScreen\r\n        match={match}\r\n        history={history} />\r\n}\r\n\r\n",["41","42"],"F:\\server\\my-app\\src\\screens\\OrderScreen.js",["43","44"],"F:\\server\\my-app\\src\\screens\\RegisterScreen.js",[],"F:\\server\\my-app\\src\\constant\\index.js",[],"F:\\server\\my-app\\src\\components\\ItemProduct\\index.js",[],"F:\\server\\my-app\\src\\components\\ItemMenu\\index.js",[],"F:\\server\\my-app\\src\\index.js",[],{"ruleId":"45","replacedBy":"46"},{"ruleId":"47","replacedBy":"48"},{"ruleId":"49","severity":1,"message":"50","line":94,"column":18,"nodeType":"51","messageId":"52","endLine":94,"endColumn":20},{"ruleId":"49","severity":1,"message":"53","line":135,"column":33,"nodeType":"51","messageId":"52","endLine":135,"endColumn":35},{"ruleId":"45","replacedBy":"54"},{"ruleId":"47","replacedBy":"55"},{"ruleId":"49","severity":1,"message":"53","line":29,"column":33,"nodeType":"51","messageId":"52","endLine":29,"endColumn":35},{"ruleId":"49","severity":1,"message":"50","line":43,"column":25,"nodeType":"51","messageId":"52","endLine":43,"endColumn":27},"no-native-reassign",["56"],"no-negated-in-lhs",["57"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.",["56"],["57"],"no-global-assign","no-unsafe-negation"]